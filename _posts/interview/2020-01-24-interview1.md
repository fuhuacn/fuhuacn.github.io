---
layout: post
title: 阿里 - 面经学习 1
categories: Interview
description: 阿里 - 面经学习 1
keywords: 面经
---

面试题来自：[链接](https://blog.csdn.net/zlx312/article/details/79437015)

目录

* TOC
{:toc}

# 一、网络

## 子网掩码是什么？有什么作用

使用的 IPv4 协议对 IP 地址强行定义了一些保留地址，即：“网络地址”和“广播地址”。所谓“网络地址”就是指“主机号”全为“0”的IP地址，如：125.0.0.0（A类地址）；而“广播地址”就是指“主机号”全为“255”时的IP地址，如：125.255.255.255（A类地址）。

子网掩码是用来标识两个 IP 地址是否同属于一个子网。其每一位上的数值代表不同含义：为“1”则代表该位是网络位；若为“0”则代表该位是主机位。如果两个 IP 地址分别与同一个子网掩码进行按位“与”计算后得到相同的结果，即表明这两个 IP 地址处于同一个子网中。

## TCP 三次握手，能两次握手嘛

1. 客户端发送 SYN 连接请求。
2. 服务端像客户端发送确认 ACK 报文，客户端 ESTABLISHED
3. 客户端收到报文后想服务端发出 ACK 确认，服务端 ESTABLISHED

不能两次握手。因为客户端有超时重传机制。例如当出现网络滞留时，服务端返回的 ACK 客户端迟迟没有收到，就会再次发送建立连接指令。如果只有两次握手，那当服务端返回 ACK 时，服务端自己就已经认为自己建立连接了，这时如果有重传就会建立多个连接，但客户端其实只有一个连接。使用三次握手的话，客户端收到 ACK 后在发送 ACK 给服务端才建立连接，可以保证只有一个连接。

*引申四次挥手*

1. 客户端发送完全部数据，发送给服务端 FIN 请求结束。
2. 服务端返回 ACK 表示知道要结束了，同时此时依然发送未完的数据。
3. 服务端数据发送完毕，发送 FIN 表示自己想要结束。
4. 客户端收到 FIN，返回 ACK。服务端 CLOSED，客户端等待 2 倍最大报文存活时间结束。

四次挥手原因是服务端会有未发完数据，发完后才能通知客户端可以结束。等待最后一个 ACK 才关是因为不知道客户端会不会又没收到的数据等待重传。

TIME_WAIT 是因为要确认服务端收到了最后的确认报文，同时让本连接所有报文都消失，使得下一个连接不会再有旧连接数据。